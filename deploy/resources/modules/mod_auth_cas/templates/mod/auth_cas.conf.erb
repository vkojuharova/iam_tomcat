#
# mod_auth_cas is an Apache 2.0/2.2 compliant module that supports the
# CASv1 and CASv2 protocols
#

LoadModule auth_cas_module modules/mod_auth_cas.so


CASCookiePath       /mod_auth_cas/
CASCertificatePath  <%= @default_ssl_cert %>

CASLoginURL         <%= @cas_login_url %>
CASValidateURL      <%= @cas_validate_url %>


CASValidateServer  Off
CASValidateDepth   9
CASDebug           On

CASAllowWildcardCert On

<%#  for Rey  %>
CASCookieHttpOnly  On

CASVersion         2

CASValidateSAML     On

ProxyRequests On
ProxyPreserveHost On
<Proxy *>
        Order deny,allow
        Allow from all
</Proxy>

<% [@location].flatten.compact.each do |location| %>
  <Location /<%= location['path'] %> >
      AuthType CAS
      require valid-user
      CASAuthNHeader CAS_USER
  </Location>
<% end %>

<% [@proxy_pass].flatten.compact.each do |proxy_pass| %>
ProxyPass       /<%= proxy_pass['path'] %> ajp://<%= proxy_pass['host'] %>:<%= proxy_pass['ajp_port'] %>/<%= proxy_pass['app_name'] %>
<% end %>




